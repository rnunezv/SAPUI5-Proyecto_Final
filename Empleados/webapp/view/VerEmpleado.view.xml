<mvc:View   controllerName="logaligroup.Empleados.controller.VerEmpleado" 
            xmlns:mvc="sap.ui.core.mvc" 
            xmlns:suite="sap.suite.ui.commons"
            xmlns="sap.m"
            displayBlock="true">
            
    <SplitApp id="splitApp">

        <!-- Master -->
        <masterPages >

            <Page id="masterPage" showHeader="false">
                <Toolbar >
                    <Button icon="sap-icon://nav-back" press="onNavBack" />
                    <SearchField liveChange="onFiltrarEmpleado" width="100%" />
                </Toolbar>

                <List id="listaEmpleados" items="{path:'odataGestionModel>/Users', filters:[{path:'SapId',operator:'EQ',value1:'rnunezv@gmail.com'}]}"
                      itemPress="onBuscarEmpleado">
                    <items>
                        <StandardListItem title="{odataGestionModel>FirstName} {odataGestionModel>LastName}" description="{odataGestionModel>Dni}" type="Active"/>                        
                    </items>
                </List>
            </Page>

        </masterPages>


        <!-- Detail -->
        <detailPages>

			<Page id="detailSeleccionPage" showHeader="false">
				<FlexBox alignItems="Center" justifyContent="Center" height="100%">
					<Text text="{i18n>seleccioneEmpleado}"></Text>
				</FlexBox>
			</Page>

            <Page id="detailEmpleadoPage" title="{i18n>detalleEmpleado}">

            	<ObjectHeader
					icon= "{= ${odataGestionModel>Type} === '0' ? 'sap-icon://employee-pane' : ${odataGestionModel>Type} === '1' ? 'sap-icon://employee' : 'sap-icon://leads' }"
					title="{odataGestionModel>FirstName} {odataGestionModel>LastName}"
					intro="{odataGestionModel>Dni}"
					class="sapUiResponsivePadding--header"
					responsive="true">

						<ObjectAttribute title="{i18n>fechaIncorporacion}" text="{ path:'odataGestionModel>CreationDate', type:'sap.ui.model.type.Date'}" />
						<ObjectAttribute title="{i18n>tipo}" text="{= ${odataGestionModel>Type} === '0' ? ${i18n>interno} : ${odataGestionModel>Type} === '1' ? ${i18n>autonomo} : ${i18n>gerente} }"/>
						<ObjectAttribute title="{i18n>comentario}" text="{odataGestionModel>Comments}"/>

				</ObjectHeader>

                <IconTabBar >
                    <items>
                        <IconTabFilter icon="sap-icon://attachment" text="{i18n>ficheros}" design="Horizontal">
                            <UploadCollection   id="uploadFicheros"
                                                maximumFilenameLength="55" 
                                                maximumFileSize="10" 
                                                multiple="true"
                                                sameFilenameAllowed="true"
                                                instantUpload="true"
                                                uploadUrl="/sap/opu/odata/sap/ZEMPLOYEES_SRV/Attachments"                                               
                                                change="onFileChange"   
                                                uploadComplete="onFileUploadComplete"                                                  
                                                beforeUploadStarts="onFileBeforeUploadStarts"
                                                fileDeleted="onFileDeleted"/>  
                        </IconTabFilter>

                        <IconTabFilter icon="sap-icon://money-bills" text="{i18n>historial}" design="Horizontal">
                            <suite:Timeline enableDoubleSided="true"
                                            groupByType="Year"
                                            groupBy="CreationDate"
                                            showHeaderBar="false"
                                            enableScroll="false"
                                            height="100%"
                                            sortOldestFirst="true"
                                            content="{odataGestionModel>UserToSalary}">
                                <suite:content>
                                    <suite:TimelineItem userName="{parts:[{path:'odataGestionModel>Ammount'},{path:'odataGestionModel>Waers'}],
                                                                type: 'sap.ui.model.type.Currency',
                                                                formatOptions: {showMeasure: false}}"
                                                        icon="sap-icon://circle-task"
                                                        text="{odataGestionModel>Comments}"
                                                        dateTime="{odataGestionModel>CreationDate}"/>
                                </suite:content>
                            </suite:Timeline>
                        </IconTabFilter>
                    </items>
                </IconTabBar>

                <footer>    
                    <Toolbar >
                        <ToolbarSpacer />
                        <Button text="{i18n>darBaja}" press="onDarBaja"/>
                        <Button text="{i18n>ascender}" press="onAscender" />
                    </Toolbar>
                </footer>
            </Page>

        </detailPages>

    </SplitApp>

</mvc:View>